<!DOCTYPE html>
<html lang="en">
    <head>
        <% include partial/head %>
    </head>
    <body>
        <% include partial/header %>
        
        <!--================Categories Banner Area =================-->
        <section class="solid_banner_area">
            <div class="container">
                <div class="solid_banner_inner">
                    <h3>Welcome, <strong><%= user.name %></strong></h3>
                </div>
            </div>
        </section>
        <!--================End Categories Banner Area =================-->
        
        <!--================Start Area =================-->
        <form class="login_form row">
            <div class="col-lg-6 form-group">
                <input class="form-control" id="inputname" name = 'name' type="text" placeholder="Name"
                value="<%=user.name%>">
            </div>
            <div class="col-lg-6 form-group">
                <input class="form-control" id="inputemail" name = 'email' type="email" placeholder="Email"
                value="<%=user.email%>">
            </div>
            <div class="col-lg-6 form-group">
                <input class="form-control" id="inputusername" name = 'username' type="text" placeholder="User Name"
                value="<%=user.username%>">
            </div>
            <div class="col-lg-6 form-group">
                <input class="form-control" id="inputphone" name = 'phone' type="text" placeholder="Phone"
                value="<%=user.phone%>">
            </div>
            <div class="col-lg-6 form-group">
                <input class="form-control" id="inputpassword" name = 'password' type="password" placeholder="Password"
                value="<%user.password%>">
            </div>
            <div class="col-lg-6 form-group">
                <button type="submit" onclick=saveChanges()>Save Changes</button>
                <button type="button" onclick=discardChanges()>Cancel</button>
            </div>
            <script>
                function saveChanges() {
                    var url = "http://localhost:3000/edit/<%=user.id%>";
                    var newValues = {
                        name: $("#inputname").val(),
                        email: $("#inputemail").val(),
                        username: $("#inputusername").val(),
                        phone: $("#inputphone").val(),
                        password: $("#inputpassword").val()
                    }

                    $.ajax({
                        url:url,
                        type: "POST",
                        data: JSON.stringify(newValues),
                        dataType: "json",
                        contentType: "application/json",
                        success: function(result){
                            alert("Profile Updated Successfully");
                            location.href = "<%=hostPath%>"
                        },
                        error: function(result){
                            alert("Error updating student record");
                            discardChanges();
                        }
                    })
                }

                function discardChanges() {
                    location.href = "<%=hostPath%>"
                }
                            
            </script>
        </form>
        <!--================End Categories Banner Area =================-->
        
        <!--================Footer Area =================-->
        <% include partial/footer %>
        <!--================End Footer Area =================-->
        
        
        
        
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="js/jquery-3.2.1.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="js/popper.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <!-- Rev slider js -->
        <script src="vendors/revolution/js/jquery.themepunch.tools.min.js"></script>
        <script src="vendors/revolution/js/jquery.themepunch.revolution.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.actions.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.video.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.navigation.min.js"></script>
        <script src="vendors/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
        <!-- Extra plugin css -->
        <script src="vendors/counterup/jquery.waypoints.min.js"></script>
        <script src="vendors/counterup/jquery.counterup.min.js"></script>
        <script src="vendors/owl-carousel/owl.carousel.min.js"></script>
        <script src="vendors/bootstrap-selector/js/bootstrap-select.min.js"></script>
        <script src="vendors/image-dropdown/jquery.dd.min.js"></script>
        <script src="js/smoothscroll.js"></script>
        <script src="vendors/isotope/imagesloaded.pkgd.min.js"></script>
        <script src="vendors/isotope/isotope.pkgd.min.js"></script>
        <script src="vendors/magnify-popup/jquery.magnific-popup.min.js"></script>
        <script src="vendors/vertical-slider/js/jQuery.verticalCarousel.js"></script>
        <script src="vendors/jquery-ui/jquery-ui.js"></script>
        
        <script src="js/theme.js"></script>
    </body>
</html>